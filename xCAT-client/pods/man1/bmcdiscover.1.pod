=head1 NAME

B<bmcdiscover> - Discover Baseboard Management Controllers (BMCs) using a scan method

=head1 SYNOPSIS

B<bmcdiscover> [B<-h>|B<--help>] [B<-v>|B<--version>]

B<bmcdiscover> [B<-s> I<scan_method>] B<--range> I<ip_ranges> [B<-z>] [B<-w>] [B<-t>]

B<bmcdiscover> B<-i>|B<--bmcip> I<bmc_ip> [B<-u>|B<--bmcuser> I<bmcusername>] B<-p>|B<--bmcpwd> I<bmcpassword> B<-c>|B<--check>

B<bmcdiscover> B<-i>|B<--bmcip> I<bmc_ip> [B<-u>|B<--bmcuser> I<bmcusername>] B<-p>|B<--bmcpwd> I<bmcpassword> B<--ipsource>

=head1 DESCRIPTION

The B<bmcdiscover> command will discover Baseboard Management Controllers (BMCs) using a scan mathod.  

The command uses B<nmap> to scan active nodes over a specified IP range.  The IP range format should be a format that is acceptable by B<nmap>. 

The B<bmcdiscover> command can also obtain some information about the BMC. (Check username/password, IP address source, DHCP/static configuration)

Note: The scan method currently support is B<nmap>. 

=head1 OPTIONS

=over 10

=item B<--range>       

Specify one or more IP ranges acceptable to nmap.  IP rance can be hostnames, IP addresses, networks, etc.  A single IP address (10.1.2.3) or an IP range (10.1.2.0/24) can be specified.  If the range is very large, the B<bmcdiscover> command may take a long time to return. 

=item B<-s>            

Scan method  (The only supported scan method at this time is 'nmap')

=item B<-z>            

List the data returned in xCAT stanza format

=item B<-w>            

Write to the xCAT database

=item B<-t>

Generate a BMC type node object

=item B<-i|--bmcip>    

BMC IP

=item B<-u|--bmcuser>  

BMC user name.

=item B<-p|--bmcpwd>   

BMC user password.

=item B<-c|--check>    

Check

=item B<--ipsource>    

BMC IP source

=item B<-h|--help>

Display usage message

=item B<-v|--version>

Display version information

=back

=head1 RETURN VALUE

0  The command completed successfully.

1  An error has occurred.

=head1 EXAMPLES

1. To get all bmc from IP range

 bmcdiscover -s nmap --range "10.4.23.100-254 50.3.15.1-2"

Output is similar to:

 10.4.23.254
 50.3.15.1

Note: input for IP range can also be like scanme.nmap.org, microsoft.com/24, 192.168.0.1; 10.0.0-255.1-254.

2. After discover bmc, list the stanza format data

bmcdiscover -s nmap --range "10.4.22-23.100-254" -z

Output is similar to:

 node10422254:
        objtype=node
        groups=all
        bmc=10.4.22.254
        cons=ipmi
        mgt=ipmi

 node10423254:
        objtype=node
        groups=all
        bmc=10.4.23.254
        cons=ipmi
        mgt=ipmi

3. After discover bmc, write host node definition into the database, and the same time, give out stanza format data

 bmcdiscover -s nmap --range "10.4.22-23.100-254" -w

Output is similar to:

 node10422254:
        objtype=node
        groups=all
        bmc=10.4.22.254
        cons=ipmi
        mgt=ipmi

 node10423254:
        objtype=node
        groups=all
        bmc=10.4.23.254
        cons=ipmi
        mgt=ipmi

4. To check if user name or password is correct or not for bmc

 bmcdiscover -i 10.4.23.254 -u USERID -p PASSW0RD -c

Output is similar to:

 Correct ADMINISTRATOR

 bmcdiscover -i 10.4.23.254 -u USERID -p PASSW0RD1 -c

Output is similar to:

 Error: Wrong bmc password

 bmcdiscover -i 10.4.23.254 -u USERID1 -p PASSW0RD1 -c

Output is similar to:

 Error: Wrong bmc user

 bmcdiscover -i 10.4.23.2541234 -u USERID -p PASSW0RD -c

Output is similar to:

 Error: Not bmc

5. Get BMC IP Address source, DHCP Address or static Address

 bmcdiscover -i 10.4.23.254 -u USERID -p PASSW0RD --ipsource

Output is similar to:

 Static Address

=head1 SEE ALSO

L<lsslp(1)|lsslp.1>
